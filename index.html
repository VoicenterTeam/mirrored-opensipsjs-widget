<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenSIPS Widget</title>
</head>
<body>
    <script type="module" src="/src/main.ts"></script>

    <opensips-widget id="openSIPSWidget"></opensips-widget>

    <script>
        const widget = document.getElementById('openSIPSWidget')

        async function onWidgetInitialized ({ detail: OpenSIPSExternalWidgetAPI }) {
            const credentials = {
                username: '',
                password: '',
                domain: ''
            }

            const themeSettings = {
                colors: {
                    primary: '#5E95E8',
                    secondary: '#0d8099',
                    'main-text': '#414C59',
                    'secondary-text': '#8292A5',
                    'button-pressed-text': '#FFF',
                    'border-lines': '#DDD',
                    'primary-bg': '#FFF',
                    'secondary-bg': '#F0F2F4',
                    'inactive-bg': '#B9C2CC',
                    'success': '#7CC24F',
                    'danger': '#EC2A2A',
                    'additional-danger-bg': '#F44C4C',
                    'additional-success-bg': '#75B8A0',
                    'additional-bg': '#B0BFC2'
                },
                layoutConfig: {
                    mode: 'floating',
                    type: 'rounded',
                    position: {
                        bottom: '50px',
                        anchor: 'bottom-center',
                    }
                },
                images: {
                    backgroundLogo: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTkiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCA5OSAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTAuNTIgMC43OTk5OTlIMTMuMDk2TDguMjQ4IDEySDUuNjg4TDAuODU2IDAuNzk5OTk5SDMuNjU2TDcuMDY0IDguOEwxMC41MiAwLjc5OTk5OVpNMTkuMzE0NSAxMi4xOTJDMTUuNzc4NSAxMi4xOTIgMTMuMTg2NSA5LjcyOCAxMy4xODY1IDYuNEMxMy4xODY1IDMuMDcyIDE1Ljc3ODUgMC42MDggMTkuMzE0NSAwLjYwOEMyMi44MzQ1IDAuNjA4IDI1LjQ0MjUgMy4wNTYgMjUuNDQyNSA2LjRDMjUuNDQyNSA5Ljc0NCAyMi44MzQ1IDEyLjE5MiAxOS4zMTQ1IDEyLjE5MlpNMTkuMzE0NSA5Ljk4NEMyMS4zMTQ1IDkuOTg0IDIyLjgxODUgOC41MjggMjIuODE4NSA2LjRDMjIuODE4NSA0LjI3MiAyMS4zMTQ1IDIuODE2IDE5LjMxNDUgMi44MTZDMTcuMzE0NSAyLjgxNiAxNS44MTA1IDQuMjcyIDE1LjgxMDUgNi40QzE1LjgxMDUgOC41MjggMTcuMzE0NSA5Ljk4NCAxOS4zMTQ1IDkuOTg0Wk0yNy4zOTA1IDEyVjAuNzk5OTk5SDI5Ljk4MjVWMTJIMjcuMzkwNVpNMzguMDAwNSAxMi4xOTJDMzQuNTI4NSAxMi4xOTIgMzEuOTM2NSA5Ljc3NiAzMS45MzY1IDYuNEMzMS45MzY1IDMuMDI0IDM0LjUyODUgMC42MDggMzguMDE2NSAwLjYwOEMzOS45NTI1IDAuNjA4IDQxLjU2ODUgMS4zMTIgNDIuNjI0NSAyLjU5Mkw0MC45NjA1IDQuMTI4QzQwLjIwODUgMy4yNjQgMzkuMjY0NSAyLjgxNiAzOC4xNDQ1IDIuODE2QzM2LjA0ODUgMi44MTYgMzQuNTYwNSA0LjI4OCAzNC41NjA1IDYuNEMzNC41NjA1IDguNTEyIDM2LjA0ODUgOS45ODQgMzguMTQ0NSA5Ljk4NEMzOS4yNjQ1IDkuOTg0IDQwLjIwODUgOS41MzYgNDAuOTYwNSA4LjY1Nkw0Mi42MjQ1IDEwLjE5MkM0MS41Njg1IDExLjQ4OCAzOS45NTI1IDEyLjE5MiAzOC4wMDA1IDEyLjE5MlpNNDYuOTUwOSA5LjkySDUzLjA0NjlWMTJINDQuMzc0OVYwLjc5OTk5OUg1Mi44Mzg5VjIuODhINDYuOTUwOVY1LjMxMkg1Mi4xNTA5VjcuMzI4SDQ2Ljk1MDlWOS45MlpNNjIuODIxMiAwLjc5OTk5OUg2NS4zODEzVjEySDYzLjI1MzNMNTcuNjY5MyA1LjJWMTJINTUuMTA5M1YwLjc5OTk5OUg1Ny4yNTMzTDYyLjgyMTIgNy42VjAuNzk5OTk5Wk03MC4zNTExIDEyVjIuOTEySDY2Ljc2NzFWMC43OTk5OTlINzYuNTI3MVYyLjkxMkg3Mi45NDMxVjEySDcwLjM1MTFaTTgwLjQ5NzggOS45Mkg4Ni41OTM4VjEySDc3LjkyMThWMC43OTk5OTlIODYuMzg1OFYyLjg4SDgwLjQ5NzhWNS4zMTJIODUuNjk3OFY3LjMyOEg4MC40OTc4VjkuOTJaTTk4LjU3NjEgMTJIOTUuNzkyMUw5My42MzIxIDguODhIOTMuNTA0MUg5MS4yNDgxVjEySDg4LjY1NjFWMC43OTk5OTlIOTMuNTA0MUM5Ni40OTYxIDAuNzk5OTk5IDk4LjM2ODEgMi4zNTIgOTguMzY4MSA0Ljg2NEM5OC4zNjgxIDYuNTQ0IDk3LjUyMDEgNy43NzYgOTYuMDY0MSA4LjRMOTguNTc2MSAxMlpNOTUuNzQ0MSA0Ljg2NEM5NS43NDQxIDMuNjMyIDk0Ljk0NDEgMi45MTIgOTMuMzYwMSAyLjkxMkg5MS4yNDgxVjYuODE2SDkzLjM2MDFDOTQuOTQ0MSA2LjgxNiA5NS43NDQxIDYuMDggOTUuNzQ0MSA0Ljg2NFoiIGZpbGw9IiNENERDRTciLz4NCjwvc3ZnPg0K'
                }
            }
            const callSettings = {
                allowTransfer: true,
                autoAnswer: {
                    allowChange: true,
                    defaultBehavior: false
                },
                outgoingCalls: true,
                callerInfo: {
                    displayName: true,
                    callerId: {
                        display: true,
                        mask: true
                    }
                },
                shrinkOnIdle: false,
                ringingSound: ''
            }
            const config = {
                themeSettings,
                callSettings
            }

            const widgetAPI = new OpenSIPSExternalWidgetAPI(config)

            await widgetAPI.login(credentials)
        }

        widget.addEventListener('widget:ready', onWidgetInitialized)
    </script>
</body>
</html>
